<!DOCTYPE html>
<html lang="fr">
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-M3CJRL4');</script>
      <!-- End Google Tag Manager -->
    <title>
      Rapidement Configurer un Projet TypeScript
    </title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
      body {
        margin: 0;
      }
    </style>
    <style data-styled="true" data-styled-version="5.3.0">.jvCTkj{font-family:monospace;font-size:1.2em;padding-bottom:97.5px;}/*!sc*/
@media(max-width:1199px){.jvCTkj .large-screen-only{display:none;}}/*!sc*/
.jvCTkj figcaption{font-size:1em;font-weight:bold;margin-bottom:0.35em;}/*!sc*/
.jvCTkj button{padding:0.35em;font-size:0.7em;}/*!sc*/
.jvCTkj figure{margin-bottom:1.4em;}/*!sc*/
.jvCTkj *{margin:0;padding:0;overflow-wrap:anywhere;line-height:1.3;}/*!sc*/
.jvCTkj a,.jvCTkj a:visited{-webkit-text-decoration:none;text-decoration:none;color:rgb(0,128,255);}/*!sc*/
.jvCTkj dd{margin-bottom:1em;margin-left:1.4em;}/*!sc*/
.jvCTkj h1{font-size:2.6em;margin:1.7em 0 1.7em 0;}/*!sc*/
.jvCTkj h2{font-size:1.9em;margin:1em 0 1em 0;}/*!sc*/
.jvCTkj h3{font-size:1.5em;margin:0.7em 0 0.7em 0;}/*!sc*/
.jvCTkj h4{font-size:1.2em;margin:0.35em 0 0.35em 0;}/*!sc*/
.jvCTkj h5{font-size:1.1em;margin:0.35em 0 0.35em 0;}/*!sc*/
.jvCTkj h6{font-size:1em;margin:0.35em 0 0.35em 0;}/*!sc*/
.jvCTkj nav li{list-style:none;}/*!sc*/
.jvCTkj:not(nav) ul{margin-left:1.7em;margin-bottom:1.4em;}/*!sc*/
.jvCTkj:not(nav) ul li:not(:last-child){margin-bottom:1em;}/*!sc*/
.jvCTkj p{line-height:1.7;margin-bottom:1.4em;text-align:justify;}/*!sc*/
data-styled.g1[id="sc-bdnxRM"]{content:"jvCTkj,"}/*!sc*/
.hXgBcf ol a,.hXgBcf ul a,.hXgBcf ol a:visited,.hXgBcf ul a:visited{color:rgb(255,166,87);}/*!sc*/
.hXgBcf ol a.active,.hXgBcf ul a.active,.hXgBcf ol a:visited.active,.hXgBcf ul a:visited.active{color:rgb(165,210,255);font-weight:bold;}/*!sc*/
.kaqxZw ol a,.kaqxZw ul a,.kaqxZw ol a:visited,.kaqxZw ul a:visited{color:rgba(13,17,23,1);}/*!sc*/
.kaqxZw ol a.active,.kaqxZw ul a.active,.kaqxZw ol a:visited.active,.kaqxZw ul a:visited.active{color:rgba(13,17,23,1);font-weight:bold;}/*!sc*/
.llRefE ol a,.llRefE ul a,.llRefE ol a:visited,.llRefE ul a:visited{color:rgb(0,128,255);}/*!sc*/
.llRefE ol a.active,.llRefE ul a.active,.llRefE ol a:visited.active,.llRefE ul a:visited.active{color:rgba(13,17,23,1);font-weight:bold;}/*!sc*/
data-styled.g2[id="sc-gtsrHT"]{content:"hXgBcf,kaqxZw,llRefE,"}/*!sc*/
.QJZHZ{margin-bottom:1.4em;}/*!sc*/
.QJZHZ ol,.QJZHZ ul{padding-left:1.7em;}/*!sc*/
.QJZHZ ol li:not(:last-child),.QJZHZ ul li:not(:last-child){margin-bottom:1em;}/*!sc*/
.QJZHZ ol li>nav,.QJZHZ ul li>nav{margin-top:1em;}/*!sc*/
.QJZHZ ol a,.QJZHZ ul a,.QJZHZ ol a:visited,.QJZHZ ul a:visited{position:relative;}/*!sc*/
.QJZHZ ol a::before,.QJZHZ ul a::before,.QJZHZ ol a:visited::before,.QJZHZ ul a:visited::before{content:'';left:-1.4em;position:absolute;}/*!sc*/
.QJZHZ ol a.active::before,.QJZHZ ul a.active::before,.QJZHZ ol a:visited.active::before,.QJZHZ ul a:visited.active::before{font-size:0.8em;line-height:1.6em;content:'★';-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}/*!sc*/
.cfgakX{margin-bottom:1.4em;}/*!sc*/
.cfgakX ol,.cfgakX ul{padding-left:1.4em;}/*!sc*/
.cfgakX ol li:not(:last-child),.cfgakX ul li:not(:last-child){margin-bottom:1em;}/*!sc*/
.cfgakX ol li>nav,.cfgakX ul li>nav{margin-top:1em;}/*!sc*/
.cfgakX ol a,.cfgakX ul a,.cfgakX ol a:visited,.cfgakX ul a:visited{position:relative;}/*!sc*/
.cfgakX ol a::before,.cfgakX ul a::before,.cfgakX ol a:visited::before,.cfgakX ul a:visited::before{content:"-";left:-1.4em;position:absolute;}/*!sc*/
.cfgakX ol a.active::before,.cfgakX ul a.active::before,.cfgakX ol a:visited.active::before,.cfgakX ul a:visited.active::before{font-size:0.8em;line-height:1.6em;content:'★';-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}/*!sc*/
data-styled.g3[id="sc-dlnjwi"]{content:"QJZHZ,cfgakX,"}/*!sc*/
.hUwMJW ol,.hUwMJW ul{margin-bottom:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0;}/*!sc*/
.hUwMJW ol li,.hUwMJW ul li{margin-bottom:0!important;padding:1em;}/*!sc*/
data-styled.g4[id="sc-hKFxyN"]{content:"hUwMJW,"}/*!sc*/
.iylGhi{margin-bottom:0;background-color:rgba(13,17,23,1);}/*!sc*/
@media(max-width:799px){.iylGhi{display:none;}}/*!sc*/
data-styled.g5[id="sc-eCApnc"]{content:"iylGhi,"}/*!sc*/
@media(min-width:800px){.kMthTr{display:none;}}/*!sc*/
data-styled.g8[id="sc-iCoGMd"]{content:"kMthTr,"}/*!sc*/
.cmbtlG{margin-bottom:4em;}/*!sc*/
.cmbtlG *:target{border-bottom:1px solid rgba(13,17,23,1);}/*!sc*/
.cmbtlG > *:first-child *{margin:0;}/*!sc*/
.cmbtlG > *:first-child{margin-top:1em;}/*!sc*/
.cmbtlG > *:first-child + nav{margin-bottom:1em;}/*!sc*/
.cmbtlG > *:first-child + :not(nav) + *{margin-top:1em;}/*!sc*/
data-styled.g10[id="sc-pNWdM"]{content:"cmbtlG,"}/*!sc*/
.dJdFwe{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:bold;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}/*!sc*/
.dJdFwe > *:first-child{margin-right:0.7em;}/*!sc*/
data-styled.g11[id="sc-jrsJWt"]{content:"dJdFwe,"}/*!sc*/
.bAVzgZ{margin-top:0.7em;}/*!sc*/
.bAVzgZ ol{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;}/*!sc*/
.bAVzgZ ol li:not(:first-child)::before{content:' - ';}/*!sc*/
data-styled.g12[id="sc-kEqXSa"]{content:"bAVzgZ,"}/*!sc*/
.jibPFy{-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/
.jibPFy > *:first-child{font-size:1em;margin-top:0;}/*!sc*/
.jibPFy > a{font-weight:bold;margin-left:0.7em;}/*!sc*/
data-styled.g13[id="sc-iqAclL"]{content:"jibPFy,"}/*!sc*/
.DykGo{margin-bottom:2.5em;}/*!sc*/
data-styled.g14[id="sc-crzoAE"]{content:"DykGo,"}/*!sc*/
@media(min-width:800px){.jEEywD{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}}/*!sc*/
data-styled.g15[id="sc-dIsUp"]{content:"jEEywD,"}/*!sc*/
@media(min-width:1200px){.iPexDg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}/*!sc*/
.iPexDg > .page-body{max-width:799px;padding-left:1.4em;padding-right:1.4em;}/*!sc*/
data-styled.g16[id="sc-bqGGPW"]{content:"iPexDg,"}/*!sc*/
.kFmqyc{margin-left:1.4em;}/*!sc*/
@media(min-width:1200px){.kFmqyc{position:-webkit-sticky;position:sticky;top:20vh;max-width:300.75px;margin-top:20vh;margin-right:100.25px;}}/*!sc*/
.kFmqyc > *:first-child{font-size:1em;color:rgb(0,128,255);}/*!sc*/
.kFmqyc > ol{border-left:1px solid rgba(13,17,23,1);}/*!sc*/
.kFmqyc > ol + a{display:block;margin-top:1.4em;}/*!sc*/
data-styled.g17[id="sc-ksluID"]{content:"kFmqyc,"}/*!sc*/
.hmqpxx{white-space:nowrap;}/*!sc*/
data-styled.g19[id="sc-fnVZcZ"]{content:"hmqpxx,"}/*!sc*/
.hKymwP{font-size:0.9em;margin-bottom:1.4em;padding:0.7em;border:1px solid #bbb;}/*!sc*/
.hKymwP > *:first-child{margin-top:0;}/*!sc*/
.hKymwP > *:last-child{margin-bottom:0;}/*!sc*/
data-styled.g22[id="sc-iemWCZ"]{content:"hKymwP,"}/*!sc*/
.biCrYn{margin-top:1.7em;margin-bottom:1.7em;}/*!sc*/
.biCrYn > figure{max-width:100%;}/*!sc*/
.biCrYn > figure > pre{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;overflow:auto;}/*!sc*/
.biCrYn > figure > pre > code{margin:0;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}/*!sc*/
data-styled.g23[id="sc-dIvrsQ"]{content:"biCrYn,"}/*!sc*/
.ccTnQh{padding:0.7em;margin:0;}/*!sc*/
@media(max-width:399px){.ccTnQh{font-size:0.7em;}}/*!sc*/
@media (min-width:400px) and (max-width:799px){.ccTnQh{font-size:1em;}}/*!sc*/
@media (min-width:800px){.ccTnQh{font-size:1.4em;}}/*!sc*/
data-styled.g24[id="sc-hHEiqL"]{content:"ccTnQh,"}/*!sc*/
</style>
    <link rel="preload" href="/style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/style.css"></noscript>
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M3CJRL4"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <!-- End Google Tag Manager (noscript) -->
    <div id="root"><div class="sc-bdnxRM jvCTkj"><nav class="sc-gtsrHT sc-dlnjwi sc-hKFxyN sc-eCApnc hXgBcf QJZHZ hUwMJW iylGhi"><ol><li><a href="/">Accueil</a></li><li><a href="/ia-github-copilot"><i>Copilot</i>, une (trop ?) Fascinante <i>IA</i></a></li><li><a aria-current="page" class="active" href="/typescript">Autour de <i>TypeScript</i></a></li></ol></nav><main class="sc-dIsUp jEEywD"><div class="sc-bqGGPW iPexDg"><div><nav class="sc-gtsrHT sc-dlnjwi sc-ksluID kaqxZw QJZHZ kFmqyc"><h2>Autour de <i>TypeScript</i></h2><ol><li><a href="/typescript">Mes Débuts avec <i>TypeScript</i></a></li><li><a href="/typescript/typescript-en-bref"><i>TypeScript</i> en Bref</a></li><li><a aria-current="page" class="active" href="/typescript/rapidement-configurer-un-projet">Rapidement Configurer un Projet <i>TypeScript</i></a></li><li><a href="/typescript/jolis-exemples-en-ts">Jolis Exemples de Code en TypeScript</a></li><li><a href="/typescript/type-narrowing">Le &quot;Type Narrowing&quot;</a></li><li><a href="/typescript/types-vs-interfaces">Types vs. interfaces</a></li></ol><a class="large-screen-only" href="#top">retourner en haut</a></nav></div><div class="page-body"><h1>Rapidement Configurer un Projet <i>TypeScript</i></h1><div id="table-of-contents"><nav class="sc-gtsrHT sc-dlnjwi sc-crzoAE llRefE cfgakX DykGo"><div class="sc-iqAclL jibPFy"><h2>Table des matières</h2><a class="" href="#top">⇈</a></div><ol><li><a class="" href="#introduction">Introduction</a></li><li><a class="" href="#installation-node-yarn">Installation de <i>Node.js</i> et de <i>yarn</i></a></li><li><a class="" href="#installation-git-yarn">Initialisation de <i>git</i> et de <i>yarn</i></a></li><li><a class="" href="#initialisation-typescript">Initialisation de <i>TypeScript</i> et <i>tsconfig.json</i></a></li><li><a class="" href="#config-eslint">Configuration du <i>linter</i> <i>eslint</i></a></li></ol></nav></div><section class="sc-pNWdM cmbtlG"><div class="sc-jrsJWt dJdFwe"><div>1/5)</div><h2 id="introduction">Introduction</h2></div><nav class="sc-kEqXSa bAVzgZ"><ol><li><a class="" href="#table-of-contents">menu</a></li><li><a class="" href="#installation-node-yarn">suiv. →</a></li></ol></nav><p>En cours de rédaction :)</p><p>Beaucoup de gens utilisent des outils dits de <i>scaffolding</i>  (littéralement &quot;construction d&#x27;échafaudage&quot;) pour créer la myriade de fichiers de configuration nécessaire à un projet web digne de ce nom de nos jours.</p><p>D&#x27;autres se créent un ou plusieurs dépôts dits &quot;de <i>boilerplate</i>&quot;  qu&#x27;ils clonent à chaque nouveau projet.</p><p>Ces approches sont pratiques, mais je ne les aime pas beaucoup :</p><ul><li>avec le <i>scaffolding</i> je ne comprends pas ce que je fais, je manque de flexibilité, j&#x27;ai du mal à débugger quand quelque chose ne fonctionne pas correctement</li><li>avec les <i>boilerplate</i> je me coupe de l&#x27;avancée de l&#x27;état de l&#x27;art et m&#x27;enferme dans des habitudes</li></ul><p>Ma stratégie personnelle est de <strong>tout reconstruire à partir de zéro à chaque fois</strong>, tout en m&#x27;inspirant de sources que je connais bien pour accélérer la manoeuvre.</p><p>Ces sources peuvent être certains de mes projets, de la documentation officielle bien réputée...</p><p>Plus on fait ça, plus on va vite et plus on en apprend sur ses outils. Je perds sans doute une dizaine de minute à chaque projet par rapport à quelqu&#x27;un qui va utiliser un outil magique, mais que sont dix minutes sur la vie d&#x27;un projet, surtoût quand on prend en compte le bénéfice de l&#x27;apprentissage&#x27;?</p><p>Pour rédiger cette page, je me suis installé un <i>Ubuntu 20.04</i> tout frais dans une VM, histoire de <strong>vraiment prendre les choses depuis le début</strong>.</p><p>Je vais tâcher de documenter la manière la plus efficace, selon moi, de créer un projet en <i>TypeScript</i> avec le linting et tout ce qui va bien en partant d&#x27;une installation vierge d&#x27;<i>Ubuntu</i>.</p><p>Nous sommes le 29 juin 2021, cette documentation sera sans doute périmée demain. Allons-y...</p></section><section class="sc-pNWdM cmbtlG"><div class="sc-jrsJWt dJdFwe"><div>2/5)</div><h2 id="installation-node-yarn">Installation de <i>Node.js</i> et de <i>yarn</i></h2></div><nav class="sc-kEqXSa bAVzgZ"><ol><li><a class="" href="#introduction">← prec.</a></li><li><a class="" href="#table-of-contents">menu</a></li><li><a class="" href="#installation-git-yarn">suiv. →</a></li></ol></nav><p>J&#x27;utilise le plus souvent possible <i>snap</i> pour installer des choses, on a des paquets plus récents, mis à jour automatiquement, et, pour certains, avec un système d&#x27;isolation de l&#x27;environnement d&#x27;exécution du programme qui fait qu&#x27;on augmente la sécurité de son système.</p><p>Bon, la nature de <i>node</i> fait qu&#x27;on n&#x27;a pas de sécurité supplémentaire grâce à <i>snap</i> par rapport à <i>apt</i> mais c&#x27;est pas grave.<br/>C&#x27;est pour ça qu&#x27;on met <span class="sc-fnVZcZ hmqpxx"><i>--classic</i></span> dans la commande qui suit :</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>Installation de Node.js<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight">sudo snap install node --channel 16/stable --classic</code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div><p>Ensuite, j&#x27;installe <i>yarn</i> comme gestionnaire de paquets plutôt que le traditionnel <i>npm</i>, parce que <i>yarn</i> apporte plein d&#x27;avantages comme :</p><ul><li>une installation beaucoup plus rapide des dépendances</li><li>une meilleure reproductibilité des installations grâce au fait que l&#x27;on versionne ses dépendances dans son projet</li><li>de façon générale, une expérience utilisateur plus agréable</li></ul><aside class="sc-iemWCZ hKymwP"><p>Pour ce site, j&#x27;utilise <i>yarn</i>.<br/>Pour l&#x27;expérience, j&#x27;ai essayé d&#x27;installer les dépendances de ce projet avec <i>npm</i> au lieu de <i>yarn</i>.</p><p>Déjà, voyons le temps que ça prend avec yarn.</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>Installation des dépendances avec yarn sans cache<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight">yarn cache clean &amp;&amp; rm -Rf node_modules
time yarn install
Done with warnings <span class="hljs-keyword">in</span> 23s 345ms
yarn install  26,21s user 8,07s system 138% cpu 24,819 total</code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div><p>On voit que ça a pris 23 secondes selon <i>yarn</i> et <strong>un peu moins de 25 secondes selon linux</strong>.<br/>Si je supprime le dossier <i>node_modules</i> et que je recommence, ça ne prend plus que 15 secondes.<br/>Le dossier <i>node_modules</i> pèse 138 MB pour 23 431 fichiers.<br/>Je build le paquet et le <i>bundle.js</i> fait <span class="sc-fnVZcZ hmqpxx">243 kB</span>.</p><p>Maintenant si je lance un <code>npm install</code> je suis salué par un joyeux <i>unable to resolve dependency tree</i>.<br/>Qu&#x27;à cela ne tienne, je lance <code>npm install --force</code> et là ça passe, <strong>en 37 secondes</strong>.<br/>Le dossier <i>node_modules pèse 139 MB pour 23 436 fichiers</i>.</p><p>Sur ce projet,<strong><i>yarn</i> met donc 12 secondes de moins que <i>npm</i>à installer les dépendances</strong>, et même plutôt <strong>22 secondes</strong> si l&#x27;on tient compte du fait que normalement on a le cache, vu qu&#x27;il est commité.</p><p>Bref, la différence de performances n&#x27;est pas flagrante, mais la balance penche un peu en la faveur de <i>yarn</i>.</p></aside><p>La liste des avantages de <i>yarn</i> est longue, mais ce n&#x27;est pas le sujet ici. <span class="sc-fnVZcZ hmqpxx">Installons-le</span> :</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>Installation de yarn<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight">sudo npm install -g yarn</code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div><p>À l&#x27;heure où j&#x27;écris ces lignes, c&#x27;est la version 1.x de <i>yarn</i> est installée. On verra plus tard qu&#x27;on utilisera en fait la v2 pour notre projet.</p></section><section class="sc-pNWdM cmbtlG"><div class="sc-jrsJWt dJdFwe"><div>3/5)</div><h2 id="installation-git-yarn">Initialisation de <i>git</i> et de <i>yarn</i></h2></div><nav class="sc-kEqXSa bAVzgZ"><ol><li><a class="" href="#installation-node-yarn">← prec.</a></li><li><a class="" href="#table-of-contents">menu</a></li><li><a class="" href="#initialisation-typescript">suiv. →</a></li></ol></nav><p>On se met dans le dossier qu&#x27;on veut  puis :</p><section><h3>Initialisation de <i>git</i></h3><p>J&#x27;initialise toujours en premier un dépôt git que je mets sur GitHub, soit en privé soit en public.</p><p>C&#x27;est gratuit, on n&#x27;a pas d&#x27;excuse pour ne pas le faire. Versionner son code c&#x27;est toujours bien, même quand on pense que le projet ne va servir à rien, on ne sait jamais.<br/>Et puis ça permet de le retrouver de n&#x27;importe-où.<br/>Le code pour ce tuto est <a rel="noreferrer" target="_blank" href="https://github.com/djfm/ts-experiments">sur GitHub</a>.</p><p><strong>En initialisant son dépôt git en premier, on gagne un peu de temps</strong> car certains outils utilisent les informations fournies par git pour accélérer un peu leur config. Notamment <code>yarn init</code>.</p><p>Je vais sur GitHub créer le répo et en bon fainéant que je suis je copie-colle la plupart des instructions qu&#x27;il me donne pour gagner du temps. Sauf le README. Fuck le README.</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>Création du dossier<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight">mkdir ts-experiments
<span class="hljs-built_in">cd</span> ts-experiments
git init .
git branch -M main
git commit --allow-empty -m<span class="hljs-string">&#x27;first commit&#x27;</span>
git remote add origin git@github.com:djfm/ts-experiments.git
git push -u origin main</code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div><p><strong>On s&#x27;occupe tout de suite de rajouter un fichier <i>.gitignore</i></strong>  avant de faire quoi que ce soit avec <i>yarn</i>.</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>Fichier .gitignore de base<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight">node_modules

.yarn/*
!.yarn/cache
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/sdks
!.yarn/versions</code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div><p>Source de cette information : <a href="https://yarnpkg.com/getting-started/qa#which-files-should-be-gitignored">yarnpkg.com</a>.</p><p><strong>Et voila pour <i>git</i></strong> !  On peut passer à la suite.</p></section><section><h3>Initialisation de <i>yarn</i></h3><p>Enfin on lance <code>yarn init</code> :</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>initialisation du package.json<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight">yarn init</code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div><p>Là, il n&#x27;y à qu&#x27;a <strong>répondre aux questions</strong>. Pour l&#x27;<i>entry point</i> on peut mettre <i>src/index.ts</i> à la place du <i>index.js</i> suggéré.</p><p>Grâce au fait que j&#x27;ai déjà initialisé mon répo git la réponse à la question <q>repository url</q> est déjà pré-remplie ansi que <q>author</q>.</p><p>Ça nous crée un fichier <i>package.json</i> tout comme l&#x27;aurait fait npm.<br/>Pour <q>private</q> je mets &#x27;true&#x27; car je n&#x27;ai pas l&#x27;intention de publier ce paquet sur le <i>registry</i> global.</p><p>Maintenant que j&#x27;ai un <i>package.json</i> je rajoute dedans le très important <strong><code>&#x27;type: module&#x27;</code></strong> qui va indiquer à <i>Node.js</i> que j&#x27;ai <span class="sc-fnVZcZ hmqpxx">l&#x27;intention</span> d&#x27;utiliser les modules javascript <i>ES6+</i>, i.e. <i>import</i>/<i>export</i>.</p><p>On reparlera de ce grand bazaar.</p><p>Au final mon <i>package.json</i> ressemble à ça :</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>package.json<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ts-experiments&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;module&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;test stuff&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;main&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;src/index.ts&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;repository&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;git@github.com:djfm/ts-experiments.git&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;author&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;djfm &lt;fm.de.jouvencel@gmail.com&gt;&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;license&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;MIT&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;private&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span>
<span class="hljs-punctuation">}</span></code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div><p>Maintenant qu&#x27;on a un <i>package</i> défini, on peut mettre à jour <i>yarn</i> :</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>Mise à jour de yarn vers la v2<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight">yarn <span class="hljs-built_in">set</span> version berry
yarn --version <span class="hljs-comment"># 2.4.2 dans mon cas</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;nodeLinker: node-modules&quot;</span> &gt;&gt; .yarnrc.yml</code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div><p>Le <strong><code>echo &quot;nodeLinker: node-modules&quot; &gt;&gt; .yarnrc.yml</code></strong> est <strong>important</strong>, cela dit à <i>yarn</i> d&#x27;utiliser un <strong>traditionnel dossier <i>node_modules</i></strong> au lieu de sa relativement nouvelle architecture dénommée <i>Plug&#x27;n&#x27;Play</i>.</p><aside class="sc-iemWCZ hKymwP"><header><h4>Petit coup de gueule au sujet de <i>Plug&#x27;n&#x27;Play</i></h4></header><p><i>Plug&#x27;n&#x27;Play</i> c&#x27;est très bien sur le papier, mais ça fonctionne encore un peu mal avec un certain nombre d&#x27;outils, donc pour le moment je ne l&#x27;utilise pas.</p><p>En fait, je pense que je ne l&#x27;utiliserai même jamais, car <strong>P&#x27;n&#x27;P n&#x27;est pas compatible avec <i>ESM</i></strong> (les modules natifs JavaScript) et ne semble pas aller dans cette direction.</p><p>Si je comprends bien la philosophie de <i>P&#x27;n&#x27;Play</i>  ils veulent court-circuiter complètement le système de résolution des modules de <i>Node.js</i> (ainsi que celui des navigateurs ?).</p><figure><blockquote cite="https://yarnpkg.com/features/pnp">Yarn already knows everything there is to know about your dependency tree - it even installs it on the disk for you. So the question becomes: <strong>why is it up to Node to find where your packages are?</strong>  Why isn&#x27;t it the package manager&#x27;s job to inform the interpreter about the location of the packages on the disk, and that any require call to package X by package Y is meant to resolve to version V? It&#x27;s from this postulate that Plug&#x27;n&#x27;Play was created.</blockquote><figcaption><a rel="noreferrer" target="_blank" href="https://yarnpkg.com/features/pnp">source sur le site de yarn</a></figcaption></figure><p>C&#x27;est allez à contre-courant à l&#x27;heure où les modules JavaScript natifs commencent timidement à être supportés correctement.</p></aside></section></section><section class="sc-pNWdM cmbtlG"><div class="sc-jrsJWt dJdFwe"><div>4/5)</div><h2 id="initialisation-typescript">Initialisation de <i>TypeScript</i> et <i>tsconfig.json</i></h2></div><nav class="sc-kEqXSa bAVzgZ"><ol><li><a class="" href="#installation-git-yarn">← prec.</a></li><li><a class="" href="#table-of-contents">menu</a></li><li><a class="" href="#config-eslint">suiv. →</a></li></ol></nav><p>Il nous manque un élément crucial, bien sûr,<strong>installer <i>TypeScript</i></strong> !!</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>installation de typescript<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight">yarn add -D typescript @types/node</code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div><aside class="sc-iemWCZ hKymwP"><header><h3>Installation des modules de typage en plus des modules normaux</h3></header><p>Vous verrez, quand on installera des paquets dont on va se servir en <i>TypeScript</i> on va maintenant toujours installer aussi <i>@types/&lt;paquet&gt;</i> s&#x27;il existe;</p><p>C&#x27;est parce que certains modules sont distribués avec leur interface <i>TypeScript</i>, certains non.</p><p>Dans tous les cas on a besoin de <i>@types/node</i> qui contient tous les types pour la librairie standard de node.</p></aside><p>Le compilo <i>TypeScript</i> prend par défaut sa myriade de paramètres dans un fichier <i>tsconfig.json</i> à mettre à la racine du projet.</p><p>Je détaillerai plus tard, peut-être, ce qu&#x27;il faut en retenir, mais en voici déjà un qui marche bien :</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>tsconfig.json<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;esModuleInterop&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;sourceMap&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;jsx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;react&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;downlevelIteration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;target&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ESNext&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;module&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CommonJS&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div><p>Si vous voulez vraiment rigoler, mettez <code>&quot;strictNullChecks&quot;: true</code> dans les <i>compilerOptions</i>, on en reparlera :)</p><aside class="sc-iemWCZ hKymwP"><h4>Le paramètre le plus fourbe du <i>tsconfig.json</i> c&#x27;est: &quot;module&quot;</h4><p>Ça mérite un chapitre entier, avec son équivalent pour <code>&quot;type&quot;=&quot;module&quot;</code> dans le <i>package.json</i>.</p><p>En deux mots, ça va déterminer <strong>quel type de modules JS le compilo <i>TypeScript</i> va émettre</strong>.</p><p><i>CommonJS</i> c&#x27;est le traditionnel <code>require()</code> et <code>module.exports</code> de <i>Node.js</i>.</p><p>Sinon on peut mettre &quot;module&quot;&quot;ESNext&quot;, c&#x27;est à dire <strong>le futur : <i>ESM</i>, a.k.a. les <code>import</code>/<code>export</code></strong>.</p><p>Le <code>import</code>/<code>export</code> est la syntaxe native pour les modules en TypeScript.<br/>Elle est quasi-fonctionnelle dans les <i>Node.js</i> et dans les browsers récents, mais hélas quand on l&#x27;active on s&#x27;expose à bien des difficultés captivantes dont je reparlerai à l&#x27;occasion - parce que dans le monde du JS, tout le monde ne parle pas vraiment la même langue.</p></aside></section><section class="sc-pNWdM cmbtlG"><div class="sc-jrsJWt dJdFwe"><div>5/5)</div><h2 id="config-eslint">Configuration du <i>linter</i> <i>eslint</i></h2></div><nav class="sc-kEqXSa bAVzgZ"><ol><li><a class="" href="#initialisation-typescript">← prec.</a></li><li><a class="" href="#table-of-contents">menu</a></li></ol></nav><p>J&#x27;installe <strong>toujours en premier le linter</strong>, on va prendre <i>eslint</i> comme pour le JavaScript. C&#x27;est de loin la solution la plus populaire et la plus standard.<br/>C&#x27;est toujours bien d&#x27;être dans les standards.<br/>À la base <i>eslint</i> a été fait pour linter le <i>JavaScript</i> mais il a un plugin pour parser le <i>TypeScript</i> et tout un tas d&#x27;ensembles de règles très bien faites pour nous aider au quotidien, même des règles spécifiques à <i>TypeScript</i> via des plugins qu&#x27;on va installer.</p><p><strong>Au plus tôt on lint, au plus tôt on évite d&#x27;être con.</strong></p><p>On l&#x27;installe avec yarn et on lance <strong>son script d&#x27;initialisation</strong>  pour ne pas s&#x27;embêter à créer notre config de toutes pièces.</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>Installation du linter<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight">yarn add -D eslint

<span class="hljs-comment"># notez que contrairement à npm,</span>
<span class="hljs-comment"># avec yarn pas besoin de rajouter &quot;run&quot;</span>
<span class="hljs-comment"># pour lui demander de lancer un binaire qu&#x27;il</span>
<span class="hljs-comment"># a installé</span>
yarn eslint --init</code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div><p>On répond aux questions :</p><dl><dt>How would you like to use ESLint?</dt><dd>To check syntax, find problems, and enforce code style</dd><dt>What type of modules does your project use?</dt><dd>JavaScript modules (import/export)</dd><dt>Which framework does your project use?</dt><dd>React (oui, on sais jamais, me connaissant...)</dd><dt>Does your project use TypeScript?</dt><dd>Yes</dd><dt>Where does your code run?</dt><dd>Browser, Node (on appuie sur &quot;a&quot; pour tout choisir)</dd><dt>How would you like to define a style for your project?</dt><dd>Use a popular style guide</dd><dt>Which style guide do you want to follow?</dt><dd>Airbnb: https://github.com/airbnb/javascript</dd><dt>What format do you want your config file to be in?</dt><dd>JSON</dd></dl><aside class="sc-iemWCZ hKymwP"><p>De façon générale, quand j&#x27;ai le choix du <strong>type de fichier</strong> pour un fichier de <strong>configuration</strong>, <strong>je choisis <i>JSON</i></strong> :<br/>Ça évite des problèmes de chargement. Au stade de la config, on ne peut pas être sûr que les divers outils qui lisent les fichiers de conf. auront dejà lu le fichier qui leur explique comment lire du TypeScript, etc.<br/>Quand JSON n&#x27;est pas possible, je prends .js, et si j&#x27;ai mis un &#x27;<code>&quot;type&quot;: &quot;module&quot;</code> dans mon <i>package.json</i> je renomme le fichier en `.cjs`&#x27; et j&#x27;utilise un <code>module.exports = </code> pour exporter la config plutôt qu&#x27;un <code>export default ...</code>.</p></aside><p>Là, ça va nous proposer d&#x27;installer les dépendances qui vont bien, mais il va les installer avec <i>npm</i> et ce n&#x27;est pas ce qu&#x27;on veut, donc on copie la liste des dépendances et on répond <i>No</i>.</p><p>On peut maintenant installer avec yarn les dépendances qu&#x27;on a copiées.</p><p>Mais la liste n&#x27;est hélas pas complète, j&#x27;en rajoute donc :</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>Installation des dépendances d&#x27;eslint<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight">yarn add -D eslint-plugin-react @typescript-eslint/eslint-plugin
yarn add -D eslint-config-airbnb @typescript-eslint/parser
yarn add -D eslint-plugin-import eslint-plugin-jsx-a11y</code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div><p>De toutes façons c&#x27;est simple, s&#x27;il manque des dépendances on regarder les erreurs affichées par <i>yarn</i> et on les installes ensuite avec <code>yarn add -D</code>...</p><p>Ensuite, très utile : Se <strong>préparer une tâche de lint dans package .json</strong>.</p><p>on s&#x27;en servira rarement, mais ça permet de vérifier au moins que la config est bonne - des fois quand la config n&#x27;est pas bonne l&#x27;IDE se met tout simplement à arrêter silencieusement de signaler les erreurs.</p><p>Donc c&#x27;est bien pratique de pouvoir lancer un petit <code>yarn lint</code>  pour se rassurer si jamais on trouve que tout est décidément trop calme.</p><p>Pour faire ça, dans <i>package.json</i> on ajoute :</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>ajout du script lint<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight"><span class="hljs-attr">&quot;scripts&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;lint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;yarn eslint &#x27;src/**/*&#x27;&quot;</span>
<span class="hljs-punctuation">}</span></code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div><section><h3>Configuration eslint de base</h3><p>Normalement, de base, <i>eslint</i> aura généré quelque chose comme ça :</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>fichier .eslintrc.json à ce stade<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;env&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;browser&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;es2021&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;node&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;extends&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">&quot;plugin:react/recommended&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">&quot;airbnb&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;parser&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;@typescript-eslint/parser&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;parserOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;ecmaFeatures&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">&quot;jsx&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;ecmaVersion&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">12</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;sourceType&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;module&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;plugins&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">&quot;react&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">&quot;@typescript-eslint&quot;</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;rules&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div></section><section><header><h3>Mes modifications habituelles aux règles de base d&#x27;<i>eslint</i></h3><p>Mais à chacun ses gouts (et ses impératifs), je noterai dans ce qui suit les règles que j&#x27;éprouve le plus souvent le besoin d&#x27;ajuster.</p><p>Pour appliquer les règles qui suivent, il n&#x27;y a qu&#x27;à les insérer dans l&#x27;objet &quot;rules&quot; du fichier &quot;.eslintrc.json&quot;.</p></header><section><h4>En ce qui concerne <i>React</i></h4><div class="sc-dIvrsQ biCrYn"><figure><figcaption>Modifications aux règles eslint de base pour React<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight"><span class="hljs-comment">// celle-la, tout simplement pour</span>
<span class="hljs-comment">// pouvoir utiliser du JSX dans des fichiers</span>
<span class="hljs-comment">// portant l&#x27;extension &quot;.tsx&quot; en plus de &quot;.jsx&quot;</span>
<span class="hljs-string">&quot;react/jsx-filename-extension&quot;</span>: [
  <span class="hljs-number">1</span>, {
  <span class="hljs-string">&quot;extensions&quot;</span>: [<span class="hljs-string">&quot;.tsx&quot;</span>, <span class="hljs-string">&quot;.jsx&quot;</span>]
}]</code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div><h4>Pour le <i>TypeScript</i> en général</h4><p>Il y a pas mal de règles parfaitement sensées en <i>JavaScript</i>  mais qui perdent de leur pertinence en <i>TypeScript</i> grace aux garanties que <i>TypeScript</i> nous apporte sur notre code.</p><p>Il ne faut donc pas hésiter à désactiver les règles qui n&#x27;ont pas de sens en <i>TypeScript</i>, surtout quand une autre, spécifique à <i>TypeScript</i> la remplace.</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>Modifications aux règles du .eslintrc.json pour TypeScript<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight"><span class="hljs-comment">// oui, c&#x27;est une bonne règle,</span>
<span class="hljs-comment">// mais on en hérite d&#x27;une mieux</span>
<span class="hljs-comment">// fournie par &quot;plugin:@typescript-eslint/recommended&quot;</span>
<span class="hljs-comment">// et qui tient compte des spécificités de TypeScript,</span>
<span class="hljs-comment">// donc je désactive celle de base</span>
<span class="hljs-string">&quot;no-use-before-define&quot;</span>: <span class="hljs-number">0</span>,

<span class="hljs-comment">// quand on transpile vers de l&#x27;ESNext,</span>
<span class="hljs-comment">// c&#x27;est vraiment superflu</span>
<span class="hljs-string">&quot;no-restricted-syntax&quot;</span>: <span class="hljs-number">0</span>,

<span class="hljs-comment">// j&#x27;ai tendance à aller à la ligne après la flèche</span>
<span class="hljs-comment">// dans une arrow-function quand la ligne est trop longue,</span>
<span class="hljs-comment">// car je code souvent avec l&#x27;éditeur séparé en deux</span>
<span class="hljs-comment">// et je déteste les lignes qui dépassent</span>
<span class="hljs-string">&quot;implicit-arrow-linebreak&quot;</span>: <span class="hljs-number">0</span></code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div></section><section><h4>Le fastidieux plugin <i>import</i></h4><p>On rajoute :</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>Les settings pour import/resolver<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight"><span class="hljs-string">&quot;settings&quot;</span>: {
  <span class="hljs-string">&quot;import/resolver&quot;</span>: {
      <span class="hljs-string">&quot;node&quot;</span>: {
          <span class="hljs-string">&quot;extensions&quot;</span>: [
              <span class="hljs-string">&quot;.js&quot;</span>,
              <span class="hljs-string">&quot;.jsx&quot;</span>,
              <span class="hljs-string">&quot;.ts&quot;</span>,
              <span class="hljs-string">&quot;.tsx&quot;</span>
          ]
      }
  }
},</code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div><p>Et la règle dans <i>rules</i> , qui dépend un peu du projet...</p><div class="sc-dIvrsQ biCrYn"><figure><figcaption>import/no-unresolved<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-hHEiqL ccTnQh hljs no-highlight"><span class="hljs-string">&quot;import/extensions&quot;</span>: [<span class="hljs-number">1</span>, {
  <span class="hljs-string">&quot;ts&quot;</span>: <span class="hljs-string">&quot;never&quot;</span>,
  <span class="hljs-string">&quot;tsx&quot;</span>: <span class="hljs-string">&quot;never&quot;</span>,
  <span class="hljs-string">&quot;jsx&quot;</span>: <span class="hljs-string">&quot;never&quot;</span>,
  <span class="hljs-string">&quot;js&quot;</span>: <span class="hljs-string">&quot;always&quot;</span>
 }]</code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.35em;padding:0.35em"><legend style="font-size:0.7em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div></section></section><p>J&#x27;installe maintenant VSCode avec un petit :<br/><code>sudo snap install code --classic</code> <br/>et je le lance via <code>code .</code>.</p></section><div class="sc-fujyAs eysHZq"><a class="" href="#table-of-contents">retourner au haut de page</a></div></div></div></main><div class="sc-iCoGMd kMthTr"><input type="image" alt="ouvrir le menu" src="/img/closed-menu.svg" width="60" style="position:fixed;bottom:15px;left:15px"/></div></div></div>
    <script async src="/bundle.js"></script>
    <script async>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', async () => {
          try {
            await navigator
              .serviceWorker
              .register(`/worker.js?env=production`);
            // console.log('Service Worker Registered', { reg });
          } catch (e) {
            console.error('Service Worker failed to register', e);
          }
        });
      }
    </script>
  </body>
</html>
