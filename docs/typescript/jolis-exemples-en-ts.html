<!DOCTYPE html>
<html lang="fr">
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-M3CJRL4');</script>
      <!-- End Google Tag Manager -->
    <title>
      Jolis Exemples de Code en TypeScript
    </title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
      body {
        margin: 0;
      }
    </style>
    <style data-styled="true" data-styled-version="5.3.0">.dDmiYU{font-family:monospace;font-size:1.2em;padding-bottom:97.5px;}/*!sc*/
@media(max-width:1199px){.dDmiYU .large-screen-only{display:none;}}/*!sc*/
.dDmiYU *{margin:0;padding:0;overflow-wrap:anywhere;line-height:1.3;}/*!sc*/
.dDmiYU a,.dDmiYU a:visited{-webkit-text-decoration:none;text-decoration:none;color:rgb(0,128,255);}/*!sc*/
.dDmiYU dd{margin-bottom:0.8em;margin-left:1.4em;}/*!sc*/
.dDmiYU h1{font-size:2.6em;text-align:center;margin:1.4em 0 1.4em 0;}/*!sc*/
.dDmiYU h2{font-size:1.9em;margin:0.8em 0 0.8em 0;}/*!sc*/
.dDmiYU h3{font-size:1.5em;margin:0.5em 0 0.5em 0;}/*!sc*/
.dDmiYU h4{font-size:1.2em;margin:0.25em 0 0.25em 0;}/*!sc*/
.dDmiYU h5{font-size:1.1em;margin:0.25em 0 0.25em 0;}/*!sc*/
.dDmiYU h6{font-size:1em;margin:0.25em 0 0.25em 0;}/*!sc*/
.dDmiYU nav li{list-style:none;}/*!sc*/
.dDmiYU:not(nav) ul{margin-left:1.7em;margin-bottom:1.4em;}/*!sc*/
.dDmiYU:not(nav) ul li:not(:last-child){margin-bottom:0.8em;}/*!sc*/
.dDmiYU p{line-height:1.7;margin-bottom:1.4em;text-align:justify;}/*!sc*/
data-styled.g1[id="sc-bdnxRM"]{content:"dDmiYU,"}/*!sc*/
.ggoyxD ol a,.ggoyxD ul a,.ggoyxD ol a:visited,.ggoyxD ul a:visited{color:rgb(255,166,87);}/*!sc*/
.ggoyxD ol a.active,.ggoyxD ul a.active,.ggoyxD ol a:visited.active,.ggoyxD ul a:visited.active{color:rgb(165,210,255);font-weight:bold;}/*!sc*/
.eMjqRA ol a,.eMjqRA ul a,.eMjqRA ol a:visited,.eMjqRA ul a:visited{color:rgba(13,17,23,1);}/*!sc*/
.eMjqRA ol a.active,.eMjqRA ul a.active,.eMjqRA ol a:visited.active,.eMjqRA ul a:visited.active{color:rgba(13,17,23,1);font-weight:bold;}/*!sc*/
.fSnaIU ol a,.fSnaIU ul a,.fSnaIU ol a:visited,.fSnaIU ul a:visited{color:rgb(0,128,255);}/*!sc*/
.fSnaIU ol a.active,.fSnaIU ul a.active,.fSnaIU ol a:visited.active,.fSnaIU ul a:visited.active{color:rgba(13,17,23,1);font-weight:bold;}/*!sc*/
data-styled.g2[id="sc-gtsrHT"]{content:"ggoyxD,eMjqRA,fSnaIU,"}/*!sc*/
.fxrSuC{margin-bottom:1.4em;}/*!sc*/
.fxrSuC ol,.fxrSuC ul{padding-left:1.7em;}/*!sc*/
.fxrSuC ol li:not(:last-child),.fxrSuC ul li:not(:last-child){margin-bottom:0.8em;}/*!sc*/
.fxrSuC ol li>nav,.fxrSuC ul li>nav{margin-top:0.8em;}/*!sc*/
.fxrSuC ol a,.fxrSuC ul a,.fxrSuC ol a:visited,.fxrSuC ul a:visited{position:relative;}/*!sc*/
.fxrSuC ol a::before,.fxrSuC ul a::before,.fxrSuC ol a:visited::before,.fxrSuC ul a:visited::before{content:'';left:-1.4em;position:absolute;}/*!sc*/
.fxrSuC ol a.active::before,.fxrSuC ul a.active::before,.fxrSuC ol a:visited.active::before,.fxrSuC ul a:visited.active::before{font-size:0.8em;line-height:1.6em;content:'★';-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}/*!sc*/
.enjAUk{margin-bottom:1.4em;}/*!sc*/
.enjAUk ol,.enjAUk ul{padding-left:1.4em;}/*!sc*/
.enjAUk ol li:not(:last-child),.enjAUk ul li:not(:last-child){margin-bottom:0.8em;}/*!sc*/
.enjAUk ol li>nav,.enjAUk ul li>nav{margin-top:0.8em;}/*!sc*/
.enjAUk ol a,.enjAUk ul a,.enjAUk ol a:visited,.enjAUk ul a:visited{position:relative;}/*!sc*/
.enjAUk ol a::before,.enjAUk ul a::before,.enjAUk ol a:visited::before,.enjAUk ul a:visited::before{content:"-";left:-1.4em;position:absolute;}/*!sc*/
.enjAUk ol a.active::before,.enjAUk ul a.active::before,.enjAUk ol a:visited.active::before,.enjAUk ul a:visited.active::before{font-size:0.8em;line-height:1.6em;content:'★';-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}/*!sc*/
data-styled.g3[id="sc-dlnjwi"]{content:"fxrSuC,enjAUk,"}/*!sc*/
.eNXDun{margin-bottom:1.4em;}/*!sc*/
.eNXDun ol,.eNXDun ul{margin-bottom:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;padding:0;}/*!sc*/
.eNXDun ol li,.eNXDun ul li{margin-bottom:0!important;padding:0.8em;}/*!sc*/
data-styled.g4[id="sc-hKFxyN"]{content:"eNXDun,"}/*!sc*/
.kyVWFM{background-color:rgba(13,17,23,1);}/*!sc*/
@media(max-width:799px){.kyVWFM{display:none;}}/*!sc*/
data-styled.g5[id="sc-eCApnc"]{content:"kyVWFM,"}/*!sc*/
@media(min-width:800px){.iFEoBZ{display:none;}}/*!sc*/
data-styled.g8[id="sc-iCoGMd"]{content:"iFEoBZ,"}/*!sc*/
.hiGwhj{margin-bottom:4em;}/*!sc*/
.hiGwhj *:target{border-bottom:1px solid rgba(13,17,23,1);}/*!sc*/
.hiGwhj > *:first-child *{margin:0;}/*!sc*/
.hiGwhj > *:first-child{margin-top:0.8em;}/*!sc*/
.hiGwhj > *:first-child + nav{margin-bottom:0.8em;}/*!sc*/
.hiGwhj > *:first-child + :not(nav) + *{margin-top:0.8em;}/*!sc*/
data-styled.g10[id="sc-pNWdM"]{content:"hiGwhj,"}/*!sc*/
.fkgVPS{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:bold;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}/*!sc*/
.fkgVPS > *:first-child{margin-right:0.5em;}/*!sc*/
data-styled.g11[id="sc-jrsJWt"]{content:"fkgVPS,"}/*!sc*/
.gNCpwp{margin-top:0.5em;}/*!sc*/
.gNCpwp ol{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;}/*!sc*/
.gNCpwp ol li:not(:first-child)::before{content:' - ';}/*!sc*/
data-styled.g12[id="sc-kEqXSa"]{content:"gNCpwp,"}/*!sc*/
.hbPWWQ{-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/
.hbPWWQ > *:first-child{font-size:1em;margin-top:0;}/*!sc*/
.hbPWWQ > a{font-weight:bold;margin-left:0.5em;}/*!sc*/
data-styled.g13[id="sc-iqAclL"]{content:"hbPWWQ,"}/*!sc*/
.dRsvuH{margin-bottom:2.5em;}/*!sc*/
data-styled.g14[id="sc-crzoAE"]{content:"dRsvuH,"}/*!sc*/
@media(max-width:1199px){.bvVofJ > *{padding-left:1.4em;padding-right:1.4em;max-width:calc(100% - 0.8em * 2);}}/*!sc*/
@media(min-width:1200px){.bvVofJ{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.bvVofJ > .page-body{max-width:799px;padding:0;}.bvVofJ > .secondary-nav{-webkit-flex-basis:401px;-ms-flex-preferred-size:401px;flex-basis:401px;}.bvVofJ > .secondary-nav nav{position:-webkit-sticky;position:sticky;top:0.8em;width:401px;}}/*!sc*/
data-styled.g15[id="sc-dIsUp"]{content:"bvVofJ,"}/*!sc*/
.ifUDih{padding-right:1.4em;margin-bottom:2.5em;}/*!sc*/
.ifUDih > *:first-child{margin-top:0;}/*!sc*/
.ifUDih ol{border-left:1px solid rgba(13,17,23,1);}/*!sc*/
data-styled.g16[id="sc-bqGGPW"]{content:"ifUDih,"}/*!sc*/
.gmxFTp{margin-top:1.7em;margin-bottom:1.7em;}/*!sc*/
.gmxFTp > figure{max-width:100%;}/*!sc*/
.gmxFTp > figure > figcaption{font-size:0.8em;font-weight:bold;margin-bottom:0.25em;}/*!sc*/
.gmxFTp > figure > pre{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;overflow:auto;}/*!sc*/
.gmxFTp > figure > pre > code{margin:0;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}/*!sc*/
data-styled.g20[id="sc-fFSPTT"]{content:"gmxFTp,"}/*!sc*/
.haAGLN{padding:0.5em;margin:0;}/*!sc*/
@media(max-width:399px){.haAGLN{font-size:0.5em;}}/*!sc*/
@media (min-width:400px) and (max-width:799px){.haAGLN{font-size:0.8em;}}/*!sc*/
@media (min-width:800px){.haAGLN{font-size:1.4em;}}/*!sc*/
data-styled.g21[id="sc-bkbkJK"]{content:"haAGLN,"}/*!sc*/
</style>
    <link rel="preload" href="/style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/style.css"></noscript>
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M3CJRL4"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <!-- End Google Tag Manager (noscript) -->
    <div id="root"><div class="sc-bdnxRM dDmiYU"><nav class="sc-gtsrHT sc-dlnjwi sc-hKFxyN sc-eCApnc ggoyxD fxrSuC eNXDun kyVWFM"><ol><li><a href="/">Accueil</a></li><li><a aria-current="page" class="active" href="/typescript">Autour de <i>TypeScript</i></a></li></ol></nav><main><h1>Jolis Exemples de Code en TypeScript</h1><div class="sc-dIsUp bvVofJ"><div class="secondary-nav"><nav class="sc-gtsrHT sc-dlnjwi sc-bqGGPW eMjqRA fxrSuC ifUDih"><h2 class="large-screen-only">Autour de <i>TypeScript</i></h2><ol><li><a href="/typescript">Introduction</a></li><li><a href="/typescript/typescript-en-bref"><i>TypeScript</i> en bref</a></li><li><a href="/typescript/rapidement-configurer-un-projet">Rapidement Configurer un Projet <i>TypeScript</i></a></li><li><a aria-current="page" class="active" href="/typescript/jolis-exemples-en-ts">Jolis Exemples de Code en TypeScript</a></li><li><a href="/typescript/type-narrowing">Le &quot;Type Narrowing&quot;</a></li><li><a href="/typescript/types-vs-interfaces">Types vs. interfaces</a></li></ol><a class="large-screen-only" href="#top">retourner en haut</a></nav></div><div class="page-body"><div id="table-of-contents"><nav class="sc-gtsrHT sc-dlnjwi sc-crzoAE fSnaIU enjAUk dRsvuH"><div class="sc-iqAclL hbPWWQ"><h2>Table des matières</h2><a class="" href="#top">⇈</a></div><ol><li><a class="" href="#introduction">Introduction</a></li><li><a class="" href="#concat-map">La fonction <i>concatMap</i></a></li></ol></nav></div><section class="sc-pNWdM hiGwhj"><div class="sc-jrsJWt fkgVPS"><div>1/2)</div><h2 id="introduction">Introduction</h2></div><nav class="sc-kEqXSa gNCpwp"><ol><li><a class="" href="#table-of-contents">menu</a></li><li><a class="" href="#concat-map">suiv. →</a></li></ol></nav><p>Dans cette section, je vais essayer de collecter les petites fonctions un peu magiques et les bouts de code qui servent tout le temps et qui sont soit beaux soit dûrs à retrouver donc bons à centraliser.</p></section><section class="sc-pNWdM hiGwhj"><div class="sc-jrsJWt fkgVPS"><div>2/2)</div><h2 id="concat-map">La fonction <i>concatMap</i></h2></div><nav class="sc-kEqXSa gNCpwp"><ol><li><a class="" href="#introduction">← prec.</a></li><li><a class="" href="#table-of-contents">menu</a></li></ol></nav><p>C&#x27;est un problème très fréquent :<br/>Vous avez une fonction qui renvoie soit des éléments simples soit des tableaux du même type d&#x27;éléments, et vous voulez l&#x27;appliquer à un tableau, bref appliquer <code>Array.map</code> mais avec une fonction qui peut renvoyer des tableaux.</p><p>Dans ce cas, on veut en général obtenir la concaténation des tableaux retournés.</p><p>Grâce au sucre syntactique d&#x27;ES6 la fonction s&#x27;écrit en une ligne que je trouve assez élégante. Bon OK je prends 3 lignes parce que je déteste les longues lignes de code, mais c&#x27;est concis.</p><p>Le point intéressant ici, est de voir comment on la type en <i>TypeScript</i>.</p><div class="sc-fFSPTT gmxFTp"><figure><figcaption>concatMap en TypeScript<!-- --> :</figcaption><pre style="font-size:15px"><code class="sc-bkbkJK haAGLN hljs no-highlight"><span class="hljs-keyword">const</span> concatMap = &lt;T, U&gt; (fn: (x: T) =&gt; U | U[]) =&gt;
  (list: T[]): U[] =&gt;
    ([] as U[]).concat(...list.map(fn));</code></pre></figure><fieldset style="align-items:stretch;border-color:#bbb;color:rgba(13,17,23,1);display:flex;flex-direction:column;justify-content:flex-start;margin-top:0.25em;padding:0.25em"><legend style="font-size:0.5em">Zoomez ou dé-zoomez l&#x27;exemple avec la commande ci-dessous :</legend><input type="range" max="400" min="100" value="200"/></fieldset></div><p>Simple, non ?</p><p><i>concatMap</i> est donc une fonction qui accepte une fonction comme seul argument (<i>fn</i>), et retourne une fonction qui acceptera ensuite un tableau - c&#x27;est ce qu&#x27;on appelle le <i>currying</i>.</p><p>C&#x27;est très pratique de mettre l&#x27;argument sur lequel on va appliquer la transformation en dernière position notamment parce que ça permet de composer facilement les fonctions. J&#x27;en reparlerai sans doute plus tard.</p></section><div class="sc-fujyAs iHssQE"><a class="" href="#table-of-contents">retourner au haut de page</a></div></div></div></main><div class="sc-iCoGMd iFEoBZ"><input type="image" alt="ouvrir le menu" src="/img/closed-menu.svg" width="60" style="position:fixed;bottom:15px;left:15px"/></div></div></div>
    <script async src="/bundle.js"></script>
  </body>
</html>
