<!DOCTYPE html>
<html lang="fr">
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-M3CJRL4');</script>
      <!-- End Google Tag Manager -->
    <title>
      Jolis Exemples de Code en TypeScript
    </title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
      body {
        margin: 0;
      }
    </style>
    <style data-styled="true" data-styled-version="5.3.0">.hsLGDC{font-family:monospace;font-size:1.2em;}/*!sc*/
.hsLGDC *{margin:0;padding:0;}/*!sc*/
.hsLGDC a,.hsLGDC a:visited{-webkit-text-decoration:none;text-decoration:none;color:rgb(0,128,255);}/*!sc*/
.hsLGDC dd{margin-bottom:0.8em;margin-left:1.1em;}/*!sc*/
.hsLGDC h1{font-size:2.6em;text-align:center;margin:1.1em 0 1.1em 0;}/*!sc*/
.hsLGDC h2{font-size:1.9em;margin:0.8em 0 0.8em 0;}/*!sc*/
.hsLGDC h3{font-size:1.5em;margin:0.5em 0 0.5em 0;}/*!sc*/
.hsLGDC h4{font-size:1.2em;margin:0.25em 0 0.25em 0;}/*!sc*/
.hsLGDC h5{font-size:1.1em;margin:0.25em 0 0.25em 0;}/*!sc*/
.hsLGDC h6{font-size:1em;margin:0.25em 0 0.25em 0;}/*!sc*/
.hsLGDC nav li{list-style:none;}/*!sc*/
.hsLGDC:not(nav) ul{margin-left:1.5em;}/*!sc*/
.hsLGDC:not(nav) ul li:not(:last-child){margin-bottom:0.8em;}/*!sc*/
.hsLGDC p{line-height:1.7;margin-bottom:1.1em;}/*!sc*/
data-styled.g1[id="sc-bdnxRM"]{content:"hsLGDC,"}/*!sc*/
.irPdUl{background-color:#0d1117;}/*!sc*/
@media(max-width:799px){.irPdUl{display:none;}}/*!sc*/
.irPdUl ol{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;padding-top:0.5em;padding-bottom:0.5em;}/*!sc*/
.irPdUl ol li a,.irPdUl ol li a:visited{color:rgb(255,166,87);position:relative;font-weight:bold;}/*!sc*/
.irPdUl ol li a.active,.irPdUl ol li a:visited.active{color:rgb(165,210,255);}/*!sc*/
.irPdUl ol li a.active::before,.irPdUl ol li a:visited.active::before{content:'>';left:-1.1em;position:absolute;}/*!sc*/
data-styled.g2[id="sc-gtsrHT"]{content:"irPdUl,"}/*!sc*/
@media(min-width:800px){.dGJHLk{display:none;}}/*!sc*/
data-styled.g5[id="sc-eCApnc"]{content:"dGJHLk,"}/*!sc*/
.gTeEux *:target{margin-left:0.25em;padding-left:0.5em;border-left:1px solid #0d1117;}/*!sc*/
.gTeEux > *:first-child *{margin:0;}/*!sc*/
.gTeEux > *:first-child{margin-top:0.8em;}/*!sc*/
.gTeEux > *:first-child + nav{margin-bottom:0.8em;}/*!sc*/
.gTeEux > *:first-child + :not(nav) + *{margin-top:0.8em;}/*!sc*/
data-styled.g7[id="sc-gKAaRy"]{content:"gTeEux,"}/*!sc*/
.kNUnqy{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:bold;}/*!sc*/
.kNUnqy > *:first-child{margin-right:0.5em;}/*!sc*/
data-styled.g8[id="sc-iCoGMd"]{content:"kNUnqy,"}/*!sc*/
.lbPufF ol{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;}/*!sc*/
.lbPufF ol li:not(:first-child)::before{content:' - ';}/*!sc*/
data-styled.g9[id="sc-fujyAs"]{content:"lbPufF,"}/*!sc*/
.bBwnmt{-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/
.bBwnmt > *:first-child{font-size:1em;}/*!sc*/
.bBwnmt > a{font-weight:bold;margin-left:0.5em;}/*!sc*/
data-styled.g10[id="sc-pNWdM"]{content:"bBwnmt,"}/*!sc*/
.cOetIS ol{margin-left:0.5em;padding-left:0.8em;margin-bottom:2.5em;}/*!sc*/
.cOetIS ol li{position:relative;}/*!sc*/
.cOetIS ol li:not(:last-child){margin-bottom:0.5em;}/*!sc*/
.cOetIS ol li a::before{content:'∙';left:-0.8em;position:absolute;}/*!sc*/
.cOetIS ol li a.active{color:#0d1117;}/*!sc*/
.cOetIS ol li a.active::before{content:'>';}/*!sc*/
data-styled.g11[id="sc-jrsJWt"]{content:"cOetIS,"}/*!sc*/
@media(max-width:1199px){.leezfu > div:last-child{padding-left:0.5em;padding-right:0.5em;}}/*!sc*/
@media(min-width:1200px){.leezfu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;}.leezfu > div:last-child{max-width:799px;padding:0;}.leezfu > div:first-child{-webkit-flex-basis:300.75px;-ms-flex-preferred-size:300.75px;flex-basis:300.75px;margin-right:1.1em;}.leezfu > div:first-child nav{position:fixed;}}/*!sc*/
data-styled.g12[id="sc-kEqXSa"]{content:"leezfu,"}/*!sc*/
.djjfEH{margin-bottom:1.1em;}/*!sc*/
.djjfEH ol{border-left:1px solid #0d1117;margin-left:0.5em;padding-left:1.5em;}/*!sc*/
.djjfEH ol a,.djjfEH ol a:visited{color:#0d1117;position:relative;}/*!sc*/
.djjfEH ol a.active,.djjfEH ol a:visited.active{font-weight:bold;}/*!sc*/
.djjfEH ol a.active::before,.djjfEH ol a:visited.active::before{content:'>';left:-1.1em;position:absolute;}/*!sc*/
.djjfEH ol li:not(:last-child){margin-bottom:0.8em;}/*!sc*/
data-styled.g13[id="sc-iqAclL"]{content:"djjfEH,"}/*!sc*/
.hGPFPp{margin-bottom:20px;}/*!sc*/
.hGPFPp > figure{max-width:100%;margin-left:0;margin-right:0;margin-bottom:0;}/*!sc*/
.hGPFPp > figure > figcaption{font-weight:bold;}/*!sc*/
.hGPFPp > figure > pre{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;overflow:auto;}/*!sc*/
.hGPFPp > figure > pre > code{margin:0;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}/*!sc*/
data-styled.g17[id="sc-ksluID"]{content:"hGPFPp,"}/*!sc*/
.fJKXGV{padding:10px;margin:0;}/*!sc*/
@media(max-width:399px){.fJKXGV{font-size:8px;}}/*!sc*/
@media (min-width:400px) and (max-width:799px){.fJKXGV{font-size:10px;}}/*!sc*/
@media (min-width:800px){.fJKXGV{font-size:19px;}}/*!sc*/
data-styled.g18[id="sc-hBMUJo"]{content:"fJKXGV,"}/*!sc*/
</style>
    <link rel="preload" href="/style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/style.css"></noscript>
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M3CJRL4"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <!-- End Google Tag Manager (noscript) -->
    <div id="root"><div class="sc-bdnxRM hsLGDC"><div style="display:block"><nav class="sc-gtsrHT irPdUl"><ol><li><a href="/">Accueil</a></li><li><a aria-current="page" class="active" href="/typescript">Autour de <i>TypeScript</i></a></li></ol></nav><main><h1>Autour de <i>TypeScript</i></h1><div class="sc-kEqXSa leezfu"><div><nav class="sc-iqAclL djjfEH"><ol><li><a href="/typescript">Introduction</a></li><li><a href="/typescript/typescript-en-bref"><i>TypeScript</i> en bref</a></li><li><a href="/typescript/rapidement-configurer-un-projet">Rapidement Configurer un Projet</a></li><li><a aria-current="page" class="active" href="/typescript/jolis-exemples-en-ts">Jolis Exemples de Code en TypeScript</a></li><li><a href="/typescript/type-narrowing">Le &quot;Type Narrowing&quot;</a></li><li><a href="/typescript/types-vs-interfaces">Types vs. interfaces</a></li></ol></nav></div><div><div id="table-of-contents"><nav class="sc-jrsJWt cOetIS"><div class="sc-pNWdM bBwnmt"><h2>Table des matières</h2><a href="#top">⇈</a></div><ol><li><a href="#introduction">Introduction</a></li><li><a href="#concat-map">La fonction <i>concatMap</i></a></li></ol></nav></div><section class="sc-gKAaRy gTeEux"><div class="sc-iCoGMd kNUnqy"><div>1/2)</div><h2 id="introduction">Introduction</h2></div><nav class="sc-fujyAs lbPufF"><ol><li><a href="#table-of-contents">menu</a></li><li><a href="#concat-map">suiv. →</a></li></ol></nav><p>Dans cette section, je vais essayer de collecter les petites fonctions un peu magiques et les bouts de code qui servent tout le temps et qui sont soit beaux soit dûrs à retrouver donc bons à centraliser.</p></section><section class="sc-gKAaRy gTeEux"><div class="sc-iCoGMd kNUnqy"><div>2/2)</div><h2 id="concat-map">La fonction <i>concatMap</i></h2></div><nav class="sc-fujyAs lbPufF"><ol><li><a href="#introduction">← prec.</a></li><li><a href="#table-of-contents">menu</a></li></ol></nav><p>C&#x27;est un problème très fréquent :<br/>Vous avez une fonction qui renvoie soit des éléments simples soit des tableaux du même type d&#x27;éléments, et vous voulez l&#x27;appliquer à un tableau, bref appliquer <code>Array.map</code> mais avec une fonction qui peut renvoyer des tableaux.</p><p>Dans ce cas, on veut en général obtenir la concaténation des tableaux retournés.</p><p>Grâce au sucre syntactique d&#x27;ES6 la fonction s&#x27;écrit en une ligne que je trouve assez élégante. Bon OK je prends 3 lignes parce que je déteste les longues lignes de code, mais c&#x27;est concis.</p><p>Le point intéressant ici, est de voir comment on la type en <i>TypeScript</i>.</p><div class="sc-ksluID hGPFPp"><figure><figcaption>concatMap en TypeScript<!-- --> :</figcaption><pre><code class="sc-hBMUJo fJKXGV hljs no-highlight"><span class="hljs-keyword">const</span> concatMap = &lt;T, U&gt; (fn: (x: T) =&gt; U | U[]) =&gt;
  (list: T[]): U[] =&gt;
    ([] as U[]).concat(...list.map(fn));</code></pre></figure><label><span style="display:block;text-align:left;font-family:monospace;font-size:1rem;margin-left:10px">Zoom :</span><input type="range" min="10" max="200" value="100"/></label></div><p>Simple, non ?</p><p><i>concatMap</i> est donc une fonction qui accepte une fonction comme seul argument (<i>fn</i>), et retourne une fonction qui acceptera ensuite un tableau - c&#x27;est ce qu&#x27;on appelle le <i>currying</i>.</p><p>C&#x27;est très pratique de mettre l&#x27;argument sur lequel on va appliquer la transformation en dernière position notamment parce que ça permet de composer facilement les fonctions. J&#x27;en reparlerai sans doute plus tard.</p></section><div class="sc-jSFjdj kzdrNt"><a href="#table-of-contents">retourner au haut de page</a></div></div></div></main></div><div class="sc-eCApnc dGJHLk"><input type="image" alt="ouvrir le menu" src="/img/closed-menu.svg" width="60" style="position:fixed;bottom:15px;left:15px"/></div></div></div>
    <script async src="/bundle.js"></script>
  </body>
</html>
