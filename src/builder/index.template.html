<!DOCTYPE html>
<html lang="fr">
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-M3CJRL4');</script>
      <!-- End Google Tag Manager -->
    <title>
      #TITLE#
    </title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
      body {
        margin: 0;
      }
    </style>
    #STYLES#
    <link rel="preload" href="/style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/style.css"></noscript>
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M3CJRL4"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <!-- End Google Tag Manager (noscript) -->
    <div id="root">#APP#</div>
    <script async src="/bundle.js"></script>
    <script async>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', async () => {
          try {
            await navigator
              .serviceWorker
              .register(`/worker.js?env=#NODE_ENV#`);
          } catch (e) {
            console.error('Service Worker failed to register', e);
          }
        });

        navigator.serviceWorker.ready.then(() => {
          navigator.serviceWorker.controller.postMessage({
            type: 'UPDATE_CACHE',
          });

          navigator.serviceWorker.addEventListener(
            'message', async (e) => {
              if (e.data.type === 'UPDATE_CACHE_REPLY') {
                const { nUpdated } = e.data;
                if (nUpdated > 0) {
                  console.log(`Service Worker: Updated ${nUpdated} files.`);
                } else {
                  console.log('Service Worker: No files updated.');
                }
              }
            }
          );
        });
      }
    </script>
  </body>
</html>
